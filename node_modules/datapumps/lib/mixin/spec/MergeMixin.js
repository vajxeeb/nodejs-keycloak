(function() {
  var Buffer, MergeMixin, Promise, Pump, sinon;

  require('should');

  sinon = require('sinon');

  MergeMixin = require('../MergeMixin');

  Pump = require('../../Pump');

  Buffer = require('../../Buffer');

  Promise = require('bluebird');

  describe('MergeMixin', function() {
    return it('should merge data from multiple inputs', function(done) {
      var buffer1, buffer2, pump, result;
      buffer1 = new Buffer({
        sealed: true,
        content: ['b1']
      });
      buffer2 = new Buffer({
        sealed: true,
        content: ['b2']
      });
      result = [];
      return (pump = new Pump()).mixin(MergeMixin).from(buffer1).from(buffer2).process(function(data) {
        return result.push(data);
      }).start().whenFinished().then(function() {
        result.indexOf('b1').should.not.equal(-1);
        result.indexOf('b2').should.not.equal(-1);
        return done();
      });
    });
  });

}).call(this);
